<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Slurpy by baikunz</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Slurpy</h1>
        <p class="header">Slurpy is a PHP wrapper for the pdftk command-line tool for working with PDF.</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/baikunz/Slurpy/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/baikunz/Slurpy/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/baikunz/Slurpy">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/baikunz">baikunz</a></p>


      </header>
      <section>
        <h1>
<a name="slurpy" class="anchor" href="#slurpy"><span class="octicon octicon-link"></span></a>Slurpy</h1>

<p>Slurpy is a PHP wrapper for the <a href="http://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/">pdftk</a> command-line tool
for working with PDF. This library is largely inspired by <a href="https://github.com/KnpLabs/snappy">Snappy</a> from KnpLabs, 
a library for generating images or pdf from html. Some of the Slurpy code comes directly from Snappy.</p>

<p>In order to use Slurpy you will have to download <a href="http://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/">pdftk</a> for
either Windows, Mac OSX or linux.</p>

<p><a href="http://travis-ci.org/baikunz/Slurpy"><img src="https://secure.travis-ci.org/baikunz/Slurpy.png?branch=master" alt="Build Status"></a></p>

<h2>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>If you are using <a href="http://getcomposer.org">composer</a> add the following lines to your <code>composer.json</code>:</p>

<div class="highlight highlight-json"><pre><span class="p">{</span>
    <span class="nt">"require"</span> <span class="p">:</span>  <span class="p">{</span>
        <span class="nt">"shuble/slurpy"</span><span class="p">:</span> <span class="s2">"*"</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>And run these commands:</p>

<pre><code>wget http://getcomposer.org/composer.phar
php composer.phar install
</code></pre>

<p>Now, just add the autoloader:</p>

<div class="highlight highlight-php"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">require</span> <span class="s1">'vendor/autoload.php'</span><span class="p">;</span>
</pre></div>

<p>Or, if you are not using composer, require the provided autoload:</p>

<div class="highlight highlight-php"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">require</span> <span class="s1">'path/to/slurpy/src/autoload.php'</span><span class="p">;</span>
</pre></div>

<p>Then proceed with the installation of pdftk if not already installed. Please refer to the 
<a href="http://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/">pdftk</a> website, and grab the installer
or sources, depending on your system.</p>

<p>That's it, you're done.</p>

<h2>
<a name="simple-usage" class="anchor" href="#simple-usage"><span class="octicon octicon-link"></span></a>Simple usage</h2>

<p>Visit the <a href="http://www.pdflabs.com/docs/pdftk-man-page/">pdftk documentation</a> for more details
about each operations.</p>

<h3>
<a name="create-the-factory" class="anchor" href="#create-the-factory"><span class="octicon octicon-link"></span></a>Create the factory</h3>

<p>Slurpy comes with a simple factory for dealing with pdftk operations in their simple forms.
Each call to factory methods returns a Slurpy instance, then you just need to call the <code>generate</code>
method on this Slurpy instance to process the operation.</p>

<div class="highlight highlight-php"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="c1">// Create a new factory instance, give it your path to pdftk binary</span>
<span class="nv">$factory</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Shuble\Slurpy\Factory</span><span class="p">(</span><span class="s1">'/path/to/pdftk'</span><span class="p">);</span>

<span class="nv">$slurpy</span> <span class="o">=</span> <span class="nv">$factory</span><span class="o">-&gt;</span><span class="na">generateFdf</span><span class="p">(</span><span class="s1">'path/to/input.pdf'</span><span class="p">,</span> <span class="s1">'path/to/output.fdf'</span><span class="p">);</span>

<span class="nv">$slurpy</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">();</span>
</pre></div>

<h3>
<a name="catenate-pdf-files" class="anchor" href="#catenate-pdf-files"><span class="octicon octicon-link"></span></a>Catenate PDF files</h3>

<p>The <code>cat</code> operation assembles pages from input PDFs to create a new PDF. Use cat to merge PDF pages
or to split PDF pages from documents. You can also use it to rotate PDF pages. Page order in the
new PDF is specified by the order of the inputs array.</p>

<div class="highlight highlight-php"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">use</span> <span class="nx">Shuble\Slurpy\Operation\OperationArgument\PageRange</span><span class="p">;</span>

<span class="nv">$inputs</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'/path/to/file1.pdf'</span><span class="p">,</span>
    <span class="s1">'/path/to/file2.pdf'</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span>
        <span class="s1">'filepath'</span>   <span class="o">=&gt;</span> <span class="s1">'/path/to/file3.pdf'</span><span class="p">,</span>
        <span class="s1">'password'</span>   <span class="o">=&gt;</span> <span class="s1">'pa$$word'</span><span class="p">,</span>
        <span class="s1">'start_page'</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s1">'end_page'</span>   <span class="o">=&gt;</span> <span class="s1">'end'</span><span class="p">,</span>
        <span class="s1">'qualifier'</span>  <span class="o">=&gt;</span> <span class="nx">PageRange</span><span class="o">::</span><span class="na">QUALIFIER_ODD</span><span class="p">,</span>
        <span class="s1">'rotation'</span>   <span class="o">=&gt;</span> <span class="nx">PageRange</span><span class="o">::</span><span class="na">ROTATION_EAST</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">);</span>

<span class="nv">$output</span> <span class="o">=</span> <span class="s1">'/path/to/output.pdf'</span><span class="p">;</span>

<span class="nv">$slurpy</span> <span class="o">=</span> <span class="nv">$factory</span><span class="o">-&gt;</span><span class="na">cat</span><span class="p">(</span><span class="nv">$inputs</span><span class="p">,</span> <span class="nv">$output</span><span class="p">);</span>
</pre></div>

<p>Now, <code>/path/to/ouput.pdf</code> contains the 3 pdfs, with only odd pages rotated to east for the third pdf. </p>

<h3>
<a name="shuffle-pdf-files" class="anchor" href="#shuffle-pdf-files"><span class="octicon octicon-link"></span></a>Shuffle PDF files</h3>

<p>The <code>shuffle</code> operation collates pages from input PDFs to create a new PDF. Works like the cat
operation except that it takes one page at a time from each page range to assemble the output PDF.
If one range runs out of pages, it continues with the remaining ranges. This feature was designed
to help collate PDF pages after scanning paper documents.</p>

<div class="highlight highlight-php"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">use</span> <span class="nx">Shuble\Slurpy\Operation\OperationArgument\PageRange</span><span class="p">;</span>

<span class="nv">$inputs</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'/path/to/file1.pdf'</span><span class="p">,</span>
    <span class="s1">'/path/to/file2.pdf'</span><span class="p">,</span>
    <span class="k">array</span><span class="p">(</span>
        <span class="s1">'filepath'</span>   <span class="o">=&gt;</span> <span class="s1">'/path/to/file3.pdf'</span><span class="p">,</span>
        <span class="s1">'password'</span>   <span class="o">=&gt;</span> <span class="s1">'pa$$word'</span><span class="p">,</span>
        <span class="s1">'start_page'</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s1">'end_page'</span>   <span class="o">=&gt;</span> <span class="s1">'end'</span><span class="p">,</span>
        <span class="s1">'qualifier'</span>  <span class="o">=&gt;</span> <span class="nx">PageRange</span><span class="o">::</span><span class="na">QUALIFIER_ODD</span><span class="p">,</span>
        <span class="s1">'rotation'</span>   <span class="o">=&gt;</span> <span class="nx">PageRange</span><span class="o">::</span><span class="na">ROTATION_EAST</span><span class="p">,</span>
    <span class="p">)</span>
<span class="p">);</span>

<span class="nv">$output</span> <span class="o">=</span> <span class="s1">'/path/to/output.pdf'</span><span class="p">;</span>

<span class="c1">// Creates a Slurpy instance</span>
<span class="nv">$slurpy</span> <span class="o">=</span> <span class="nv">$factory</span><span class="o">-&gt;</span><span class="na">shuffle</span><span class="p">(</span><span class="nv">$inputs</span><span class="p">,</span> <span class="nv">$output</span><span class="p">);</span>
</pre></div>

<h3>
<a name="background" class="anchor" href="#background"><span class="octicon octicon-link"></span></a>Background</h3>

<p>The <code>background</code> operation Applies a PDF watermark to the background of a single input PDF.
It uses only the first page from the background PDF and applies it to every page of the input PDF.
This page is scaled and rotated as needed to fit the input page.
If the input PDF does not have a transparent background (such as a PDF created from page scans)
then the resulting background won’t be visible — use the stamp operation instead.</p>

<p>You can also pass a fourth parameter <code>$multi</code> if you want to use the multibackground operation.</p>

<p><code>multibackground</code> is the same as the background operation, but applies each page of the
background PDF to the corresponding page of the input PDF. If the input PDF has more
pages than the stamp PDF, then the final stamp page is repeated across these remaining
pages in the input PDF.</p>

<div class="highlight highlight-php"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$input</span> <span class="o">=</span> <span class="s1">'/path/to/input.pdf'</span><span class="p">;</span> <span class="c1">// or array('filepath' =&gt; '/path/to/input.pdf', 'password' =&gt; 'S3cr3t');</span>
<span class="nv">$background</span> <span class="o">=</span> <span class="s1">'/path/to/background.pdf'</span><span class="p">;</span>
<span class="nv">$output</span> <span class="o">=</span> <span class="s1">'/path/to/output.pdf'</span><span class="p">;</span>
<span class="nv">$multi</span> <span class="o">=</span> <span class="k">false</span> <span class="c1">// [Default], Or true for multibackground operation</span>

<span class="c1">// Creates a Slurpy instance</span>
<span class="nv">$slurpy</span> <span class="o">=</span> <span class="nv">$factory</span><span class="o">-&gt;</span><span class="na">background</span><span class="p">(</span><span class="nv">$input</span><span class="p">,</span> <span class="nv">$background</span><span class="p">,</span> <span class="nv">$output</span><span class="p">,</span> <span class="nv">$multi</span><span class="p">);</span>
</pre></div>

<h3>
<a name="burst" class="anchor" href="#burst"><span class="octicon octicon-link"></span></a>Burst</h3>

<p>The <code>burst</code> operation splits a single, input PDF document into individual pages. Naming for the
resulting page is specified if a printf-style format string. i.e. if you give an ouput of
<code>page_%02d.pdf</code> to Slurpy, resulting pages are going to be <code>page_01.pdf</code>, <code>page_02.pdf</code> and so on.</p>

<blockquote>
<p>NOTE that you may have to give <code>output</code> as a complete path such as <code>/path/to/pdfs/page_%04d.pdf</code></p>
</blockquote>

<div class="highlight highlight-php"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$input</span> <span class="o">=</span> <span class="s1">'/path/to/input.pdf'</span><span class="p">;</span> <span class="c1">// or array('filepath' =&gt; '/path/to/input.pdf', 'password' =&gt; 'S3cr3t');</span>
<span class="nv">$output</span> <span class="o">=</span> <span class="s1">'/path/to/folder/pg_%02d.pdf'</span><span class="p">;</span>

<span class="nv">$slurpy</span> <span class="o">=</span> <span class="nv">$factory</span><span class="o">-&gt;</span><span class="na">burst</span><span class="p">(</span><span class="nv">$input</span><span class="p">,</span> <span class="nv">$output</span><span class="p">);</span>
</pre></div>

<h3>
<a name="generate-fdf" class="anchor" href="#generate-fdf"><span class="octicon octicon-link"></span></a>Generate fdf</h3>

<p>The <code>generateFdf</code> operation reads a single, input PDF file and generates an FDF file suitable for <code>fillForm</code>
operation. It saves this FDF file using the output filename.</p>

<div class="highlight highlight-php"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$input</span> <span class="o">=</span> <span class="s1">'/path/to/input.pdf'</span><span class="p">;</span> <span class="c1">// or array('filepath' =&gt; '/path/to/input.pdf', 'password' =&gt; 'S3cr3t');</span>
<span class="nv">$output</span> <span class="o">=</span> <span class="s1">'/path/to/folder/output.fdf'</span><span class="p">;</span>

<span class="nv">$slurpy</span> <span class="o">=</span> <span class="nv">$factory</span><span class="o">-&gt;</span><span class="na">generateFdf</span><span class="p">(</span><span class="nv">$input</span><span class="p">,</span> <span class="nv">$output</span><span class="p">);</span>
</pre></div>

<h3>
<a name="fill-form" class="anchor" href="#fill-form"><span class="octicon octicon-link"></span></a>Fill form</h3>

<p>The <code>fillForm</code> operation fills a single input PDF form with the given fdf or xfdf data file.
By default after filling the form, the ouput pdf fields remains active. You can disable the fields
from the output pdf by giving <code>true</code> as a fourth argument which will <code>flatten</code> the resulting
pdf.</p>

<blockquote>
<p>NOTE That Slurpy will soon be able to fill forms with simple key/value pairs as data instead of
fdf or xfdf files.</p>
</blockquote>

<div class="highlight highlight-php"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$input</span> <span class="o">=</span> <span class="s1">'/path/to/input.pdf'</span><span class="p">;</span> <span class="c1">// or array('filepath' =&gt; '/path/to/input.pdf', 'password' =&gt; 'S3cr3t');</span>
<span class="nv">$data</span> <span class="o">=</span> <span class="s1">'/path/to/data.fdf'</span><span class="p">;</span> <span class="c1">// or data.xfdf</span>
<span class="nv">$output</span> <span class="o">=</span> <span class="s1">'/path/to/folder/output.fdf'</span><span class="p">;</span>

<span class="nv">$slurpy</span> <span class="o">=</span> <span class="nv">$factory</span><span class="o">-&gt;</span><span class="na">fillForm</span><span class="p">(</span><span class="nv">$input</span><span class="p">,</span> <span class="nv">$data</span><span class="p">,</span> <span class="nv">$output</span><span class="p">);</span>

<span class="c1">// Or to flatten the resulting pdf.</span>
<span class="nv">$slurpy</span> <span class="o">=</span> <span class="nv">$factory</span><span class="o">-&gt;</span><span class="na">fillForm</span><span class="p">(</span><span class="nv">$input</span><span class="p">,</span> <span class="nv">$data</span><span class="p">,</span> <span class="nv">$output</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
</pre></div>

<h2>
<a name="unit-tests" class="anchor" href="#unit-tests"><span class="octicon octicon-link"></span></a>Unit tests</h2>

<p>Run the following command:</p>

<pre><code>phpunit
</code></pre>

<p>Done.</p>

<h2>
<a name="credits" class="anchor" href="#credits"><span class="octicon octicon-link"></span></a>Credits</h2>

<ul>
<li>dorian ALKOUM - <a href="mailto:baikunz@gmail.com">baikunz@gmail.com</a>
</li>
</ul><h2>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h2>

<p>Slurpy is released under the MIT license. See the provided LICENSE file for more details.</p>
      </section>
      <footer>
        <p><small>Hosted on <a href="http://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		          <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-40126320-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
